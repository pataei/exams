\subsection{Motivating Example}
\label{sec:motex}

\TODO{combination of instances, behaviours, and dimensions}


\begin{table}[t]
\caption{Schema variants of the employee database developed for multiple software variants by an SPL.
%Employee schema evolution of a database for a SPL.
%%(evolution features \vOne -- \vFive\ for employee part of the schema (the left schema column), evolution features \tOne -- \tFive\ for education part
%%of the schema (the right schema column), and \edu\ feature representing the education feature of SPL). 
%A feature (a boolean variable) represents 
%inclusion/exclusion of tables/attributes.  
%The dash-underlined attributes in the basic schema 
%have \emph{variational} present in their relation, i.e.,
%they only exist in their relation when \edu\ = \t.
%%in left schema column only exist when the \edu\ feature of SPL is enabled. 
%%This table represents 1056 possible schema variants:
%%\ensuremath{2^5} schema variants when \edu\ is disabled 
%%(by enabling any combination of \vOne--\vFive) 
%%in addition to \ensuremath{2^5 \times 2^5} when \edu\ is enabled.
}
\label{tab:mot}
\begin{center}
\small
%\footnotesize
%\scriptsize
\begin{tabular} {| c | l || l | c |}
\hline
\textbf{\tiny Temporal} & \multicolumn{2}{ c |}{\textbf{Database Schema Variants for SPL Software Variants}} & \textbf{\tiny Temporal}\\
\cline{2-3}
\textbf{\tiny Features} & \multicolumn{1}{ c ||} {\basic} & \multicolumn{1}{ c |} {\educational} & \textbf{\tiny Features}\\
\hline
%\cline{2-3}
%\cline{2-3}
%\hhline{-==}
\multirow{3}{*}{\vOne} &  \engemp\ (\empno, \name, \hiredate, \titleatt, \deptname) & 
\course\ (\cname, \tno) & \multirow{3}{*}{\tOne}\\
& \othemp\ (\empno, \name, \hiredate, \titleatt, \deptname)  & \student\ (\sno, \cname) &\\
& \job\ (\titleatt, \salary) &  &\\
\hline
\multirow{2}{*}{\vTwo} & \cellcolor{yellow}{\empacct\ (\empno, \name, \hiredate, \titleatt, \deptname)} & \course\ (\cno, \cname, \tno) & \multirow{2}{*}{\tTwo}\\
%\cdashline{2-3}
& \cellcolor{yellow}{\job\ (\titleatt, \salary)} & \student\ (\sno, \cno) & \\
\hline
\multirow{4}{*}{\vThree} & \empacct\ (\empno, \name, \hiredate, \titleatt, \deptno) & \cellcolor{yellow}{\course\ (\cno, \cname)} & \multirow{4}{*}{\tThree}\\
& \job\ (\titleatt, \salary) & \cellcolor{yellow}{\teach\ (\tno, \cno)} &\\
& \dept\ (\deptname, \deptno, \managerno) & \cellcolor{yellow}{\student\ (\sno, \cno, \grade)} &\\
& \empbio\ (\empno, \sex, \birthdate) &\cellcolor{yellow}{} &\\
\hline
\multirow{4}{*}{\vFour} & \empacct\ (\empno, \hiredate, \titleatt, \deptno, \dashuline{\isstudent}, \dashuline{\isteacher}) & \ecourse\ (\cno, \cname) & \multirow{4}{*}{\tFour}\\
& \job\ (\titleatt, \salary) & \course\ (\cno, \cname, \timeatt, \class) & \\
& \dept\ (\deptname, \deptno, \managerno) & \teach\ (\tno, \cno) & \\
& \empbio\ (\empno, \sex, \birthdate, \name) & \student\ (\sno, \cno, \grade) & \\
\hline
\multirow{4}{*}{\vFive} & \empacct\ (\empno, \hiredate, \titleatt, \deptno,  \dashuline{\isstudent}, \dashuline{\isteacher}, \salary) & \ecourse\ (\cno, \cname, \deptno) & \multirow{4}{*}{\tFive}\\
& \dept\ (\deptname, \deptno, \managerno,  \dashuline{\studentnum}, \dashuline{\teachernum}) & \course\ (\cno, \cname, \timeatt, \class, \deptno) & \\
& \empbio\ (\empno, \sex, \birthdate, \fname, \lname) & \teach\ (\tno, \cno) & \\
&& \take\ (\sno, \cno, \grade) & \\
\hline
\end{tabular}
\end{center}
\end{table}

%\arashComment{Section 2 has a useful example but it is unnecessarily too complicated as combines SPL and schema evolution right off the bat.
%1) If you want to use both, you may start with one and then enrich the example with the other. 2) It may be useful to combine and summarize Sections 1 and 2 and use the example to ground the abstract description in Section 1. 3) You might have to make the example shorter to page limits for conferences.} 
%\resp{I numbered your concerns and responded to them one by one: 1) I introduced schema evolution first and then its happening in spl. 2) I still prefer separating motivating ex and introduction to avoid complicating the intro. I want the intro to be to the point and brief, explaining that variational databases have multiple application (instances), they have appeared in literature except that researchers have failed to recognize the commonality in all those instance which is the fact that they are all variation appearing in different contexts and applications. The purpose of motivating example is to draw the reader to continue reading the paper that is more structured. It respects the reader time (if they're interested they'll continue reading into motivating example) and is more organized. 3) I'll come back to this in the final version. However, I think it's important to put the time in and use the space to establish the functionality of VDB.}
%\responded

%\point{Overall scenario.}

%In practice, new instances of variation in databases arises. We discuss such a scenario that 
%we discussed with an industry contact in \appref{industry-ex}.
In this section, we motivate the interaction of two kinds of variation in databases 
resulting in a new kind:
database-backed software produced by an SPL and schema evolution.
An SPL uses a set of boolean variables called \emph{features} 
to indicate the functionalities that each software variant requires.
Consider an SPL that generates management software for companies. 
It has a feature \edu\ that 
indicates whether a company
provides educational means such as courses for its 
employees.
%\footnote{In practice, such a SPL would have two features: \base\ and \edu,
%where \base\ is an arbitrary feature, i.e., for all variants it must be enabled, and it 
%indicates software variants that provide just basic functionalities. For simplicity
%and without loss of generality, we drop this feature.}. 
%NOTE: YOU CAN OMIT THE FOOTNOTE IF YOU'RE RUNNING OUT OF SPACE!!!!!!!
Software variants in which \edu\ is disabled (i.e., \edu\ = \f) only provide basic 
functionalities while ones in which \edu\ is enabled provide educational functionalities
in addition to the basic ones. Thus, this SPL yields two types of variants:
\basic\ and \educational.

%\point{Database of this SPL.}
Each variant of this SPL needs a database to store information
about employees, but SPL features impact the database: While
\basic\ variants do not need to store any education-related records 
\educational\ variants do. 
% In practice, SPL developers use 
%only one database for both variant categories~\cite{ATW18poly}, 
%which can easily be separated
%by using the \edu\ feature.
We visualize the impact of features on the schema variants in \tabref{mot}:
It has two
schema types: \basic\ and \educational.
A \basic\ schema variant contains only the schema in one of the cells in column \basic\
while an \educational\ schema variant consists of two sub-schemas: one from the \basic\
column and another from the \educational\ one, e.g., 
the yellow highlighted cells include relation schemas for an \educational\ schema variant. 
%Note that these sub-schemas do not 
%have to be adjunct cells.

%
Rows of \tabref{mot} indicate the evolution of schema variants in time.
To capture the evolution of the software and its database we add 
two disjoint sets of features which again are boolean variables.
% and call them
%\emph{temporal features}. 
The temporal feature sets are disjoint to allow 
individual paces for the evolution of each type of schema, e.g.
yellow cells of \tabref{mot} show a valid schema variant even though
the \basic\ and \educational\ sub-schemas are not in the same row. 
%For example, a valid software variant 
%can have the \basic\ schema associated with \vThree\ in addition
%to the \educational\ schema associated with \tFour. 
%The following scenario reiterates 
%these concepts through an example.
%Hence, we introduce \emph{temporal features} to tag schemas when they change over time.
%A \basic\ schema is associated with a temporal feature of \vOne\ -- \vFive\ while 
%an \educational\ schema is associated with a temporal feature of \tOne\ -- \tFive.
%We have two sets of temporal features because when \edu\ is enabled
%any \educational\ and \basic\ schemas can be grouped to form a complete
%schema.
%For example, a valid software variant 
%can have the \basic\ schema associated with \vThree\ and
%the \educational\ schema associated with \tFour. 
%%\point{schemas could evolve independent from each other.}
%The \educational\ schema evolves independently from the 
%\basic\ schema. For example, due to new requirements SPL DBAs need to 
%add online courses to the schema. Schema variant associated with
%\tFour\ demonstrate this change. That is why we need to have
%two sets of temporal features.
%For example, a valid software variant 
%can have the \basic\ schema associated with \vThree\ in addition
%to the \educational\ schema associated with \tFour. 
%
%the \educational\ category 
%includes tables from the \basic\ schema in addition to ones from the \educational\ schema 
%while the \basic\
%category only consists of its own tables). Separating these database
%variants using SPL features results in much cleaner databases as
%opposed to databases created for SPL in practice.

%\point{Component evolution.}
Now, consider the following scenario:
In the initial design of the \basic\ database, SPL  DBAs
settle on three tables \engemp, \othemp, and \job; shown in \tabref{mot} and associated
with feature \vOne. 
After some time, they decide
to refactor the schema to remove redundant tables,
thus, they combine the two
relations \engemp\ and \othemp\ into one, \empacct; associated with  feature \vTwo. 
Since some clients' 
software relies on a previous design the two schemas have to coexist in parallel.
%However, to capture what schema a software variant is using we introduce
%temporal features, e.g., \vOne\ and \vTwo, and tag corresponding schemas 
%with these features. 
Therefore, the existence (presence) of \engemp\ and \othemp\
relations is \emph{variational}, i.e., they only exist in the \basic\
schema when \vOne\ = \t.
This scenario describes \emph{component evolution}:
%database evolution in SPL resulted from 
developers
update, refactor, and improve components including the database~\cite{dbSPLevolve}.
% is called 
%\emph{component evolution}~\cite{dbSPLevolve}.

%\point{Product evolution.}
Now, consider the case where a client that previously requested a \basic\ variant of the
management software has recently added courses to educate its
employees in specific subjects. Hence, an SPL developer needs to enable
the \edu\ feature for this client, forcing the adjustment of the schema variant to \educational. 
This case describes \emph{product evolution}:
database evolution in SPL resulted
from clients adding/removing features/components~\cite{dbSPLevolve}. 
%is called 
%\emph{product evolution}~\cite{dbSPLevolve}. 

%\point{\edu\ affects basic too.}
The situation is further complicated since the \basic\ and \educational\ schemas are interdependent:
%not independent of each other: 
Consider
%enabling the \edu\ feature not only adds the relations in the \educational\
%schema but it also affects the \basic\ schema. 
the \basic\ schema 
variant for feature \vFour. Attributes \isstudent\ and \isteacher\ only exists
in the \empacct\ relation when \edu\ = \t, represented by a \dashuline{dash-underline},
otherwise the \empacct\
relation has only four attributes: \empno, \hiredate, \titleatt, and \deptno.
Hence, the presence of attributes \isstudent\ and \isteacher\ in \empacct\ relation is
\emph{variational}, i.e., they only exist in \empacct\ relation
when \edu\ = \t.
%similar to the presence of \engemp\ which
%is variational depending on whether \vOne is enabled or not. 

%%\point{schemas could evolve independent from each other.}
%The \educational\ schema evolves independently from the 
%\basic\ schema. For example, due to new requirements SPL DBAs need to 
%add online courses to the schema. Schema variant associated with
%\tFour\ demonstrate this change. That is why we need to have
%two sets of temporal features.
%For example, a valid software variant 
%can have the \basic\ schema associated with \vThree\ in addition
%to the \educational\ schema associated with \tFour. 

Our example demonstrates how different kinds of variation
% in time and space
interact with each other, an indispensable consequence of modern software
development.
The described interaction is similar to a recent scenario we discussed with an
industry contact in \appref{industry-ex}.
%In practice, new instances of variation in databases arises. We discuss such a scenario that 
%we discussed with an industry contact in \appref{industry-ex}.

