\section{Contributions and Outline of this Thesis}
\label{sec:contribution}

The high level goal of this thesis is to emphasize the need for a variation-aware database
framework and to present one such framework. Therefore, in addition to the formal 
definition of the framework and query language, it also provides variational data sets 
(including both the variational database and a set of queries) to illustrate the feasibility
of the proposed framework. Furthermore, it illustrates various approaches to implement
such a framework and compares their performance.

The rest of this section describes the structure of this thesis, enumerating the specific 
contribution that each chapter makes. 

\chref{bg} (\emph{Background}) introduces several concepts and terms that are the 
basis of this thesis. It describes types and how to interpret them. It explains relational
databases with assumptions that are held throughout the thesis and relational algebra. 
It also describes various ways of incorporating variation
into elements of a database. 

\chref{vdb} (\emph{Variational Database Framework}) describes a formal model of
\emph{variational databases} (VDBs), whose
structure are given by a \emph{variational schema} (\secref{vsch}) and whose content are given
by \emph{variational tables} (\secref{vtab}).
%framework and an approach to encode variation both at the schema
%level (\secref{vsch}) and content level (\secref{vtab}), resulting in a variational database
%(VDB). 
In essence, a variational database gathers multiple relational databases in one place.
\secref{vsch} and \secref{vtab} also describe how a relational database can be generated
from a VDB.
Finally, \secref{vdbfprop} defines properties of a well-formed VDB.

\chref{vql} (\emph{Variational Queries}) describes the need for a query language 
to extract information from a VDB. It formally defines 
\emph{variational relational algebra} (VRA) as a query language for
VDB in \secref{vrel-alg}.
%
It also defines the denotational semantics of VRA through the semantics of
relational algebra in \secref{vrasem}.
%
Additionally, it describes a \emph{static type system} for ensuring that all variants of a query are
compatible with the corresponding variants of the VDB in \secref{type-sys}.
% 
Then, it describes an \emph{explicitly annotating} queries function to releave the 
user from repeating the VDB's variation in their queries in \secref{constrain}.
%
It also defines a set of syntactic-based rules to \emph{minimize variation} in 
variational queries in \secref{var-min}.
%
Finally, it discusses the properties of the VRA in \secref{vqlprop} including its expressiveness and 
type safety. 
%
This chapter, \chref{vdb}, and \chref{bg} heavily borrow from our papers~\cite{ATW17dbpl, ATW18poly, vldbArXiv}.

\chref{vdbusecase} (\emph{Variational Database Use Cases}) 
aims at guiding an expert through generating a VDB and writing
variational queries for a variation scenario where unfortunately the database variants
do not exist and thus, generating the VDB requires the expert knowledge and cannot
be automated. 
%
It details two such variation scenario and introduces two use cases of VDB, one over space
(adopts the email SPL described by \citet{Hall05} and explained in \secref{enron-vdb})
 and another over time (adopts the evolution 
of an employee schema described by \citet{prima08Moon} and explained in \secref{emp-vdb}), 
in addition to how a VDB can store all database variants in a single database and
 how variational queries can capture various information needs over different database variants
in a single query. It also describes how  the VDBs were systematically 
generated and how the variational queries
were adapted and adjusted from papers describing the variation scenario. 
%
The last section of this chapter, \secref{usecase-disc}, discusses the question 
``should variation be encoded explicitly in databases?'' through the lessons learned 
while generating these use cases. This chapter heavily borrows from our previous paper~\cite{ALW21vamos} and Qiaoran Li's Masters project report~\cite{Li19}. 
Although the databases and queries were originally taken from Qiaoran's work they 
have been modified significantly so that the VDBs pass the properties of well-defined VDB and 
the queries justify the information need better. 


\chref{vdbms} discusses how we implement 
the variational database framework and the variational relational
algebra into a Variational Database Management System (VDBMS) on top of
a traditional RDBMS. This chapter 
includes the architecture of VDBMS and approaches used to generate SQL
queries to run variational queries on a backend RDBMS. It also compares the
performance of VDBMS using different SQL generator approaches. 


\wrrite{write this after you finish the chapter and do your research.}
\chref{rw} (\emph{Related Work}) collects research related to different kinds of variation 
in databases and other related variational research. 

Finally, \chref{conclusion} (\emph{Conclusion}) briefly presents the main contributions 
of this thesis and immediate future works. 

%\begin{itemize}
%%[leftmargin=*]
%%\itemsep0em
%\item We define the requirements of a a variational database framework, \secref{req}.
%%[wide, labelwidth=!, labelindent=0pt, topsep=1pt]
%%[leftmargin=*]
%%\item To account for variation explicitly, we use a \emph{variation space} 
%%and propositional formulas of features to refer to a subset of the space (\secref{encode-var})~\cite{ATW17dbpl}.
%%\item We provide a framework to capture variation within a database using
%%propositional formulas over  
%%sets of features, called \emph{feature expressions}, following~\cite{ATW17dbpl}.
%\item We define the \emph{variational database (VDB)} by incorporating 
%variation directly in the database, \secref{vdb}.
%%both the structure (schema) and
%%content (tuples) of the database, introducing \emph{variational schemas}, \secref{vsch}, 
%%and \emph{variational tables}, \secref{vtab}, and together \emph{VDBs},
%%\secref{vdb}.
%%, satisfying \textbf{N0} and first part of \textbf{N2}.
%\item We define the 
%%To express user information needs 
%\emph{variational relational algebra} query language, \secref{vrel-alg}, 
%its static type system, \secref{type-sys},
%and \emph{variation-minimzation} rules, \secref{var-min}.
%%a combination of relational algebra and 
%%choice calculus~\cite{EW11tosem,Walk13thesis}, \secref{vrel-alg}.
%%Users query a VDB by a \emph{variational query}, \secref{vq}.
%%\item 
%%%To make variational 
%%\revised{
%%%For more usability, w
%%We define VRA's static type system, \secref{type-sys},
%%and \emph{variation-minimzation} rules, \secref{var-min}.}
%% queries more useable and easier to understand, respectively,
%%by defining 
%%a static type system, \secref{type-sys},
%%and \emph{variation-minimiztion} rules, \secref{var-min}.
%%to make it easier to understand and more useable. 
%%rules to minimize 
%%variation in v-query, \secref{var-min}, to provide better
%%efficiency and usability. 
%%This completes satisfiability of \textbf{N2}.
%\item 
%%To query a 
%%variational database and receive clear results
%%\revised{To interact with a VDB}
%We implement a prototype of our framework, called  \emph{Variational Database Management System (VDBMS)}, on top a traditional DBMS, \secref{impl}.
%We test VDBMS on previously developed use cases, \secref{exp-disc}.
%%,
%%satisfying all four needs: \textbf{N0}-\textbf{N3}.
%%\textbf{N1}, \textbf{N2}, and \textbf{N3}.
%\end{itemize}